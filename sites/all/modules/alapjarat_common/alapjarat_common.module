<?php
/*
function alapjarat_preprocess_page(&$vars){
 $path = $_GET['q'];

  if (strpos($path,'archive') !== false) {
    drupal_set_title('Alapjárat');
  }
}


function alapjarat_common_preprocess_html(&$vars) {
	$vars['head_title'] = implode(' | ', array(drupal_set_title('Alapjárat')));
}
*/

function alapjarat_common_form_alter(&$form, &$form_state, $form_id) {
	if($form_id == 'search_block_form') {
		hide($form['actions']['submit']);
	}
}


function alapjarat_common_ctools_plugin_directory($owner, $plugin_type) {
	if ($owner == 'ctools' && $plugin_type == 'content_types') {
		return 'plugins/content_types';
	}
}

function alapjarat_common_article_archives_menu() {
	$dateformat = 'Y. F';

	$output = '<ul>';

	$start = date($dateformat);

	$archive = date('Ym', strtotime($start));
	$end = date($dateformat, strtotime('2016 October'));
	
	$output .= '<li>' . l($start, 'archive/' . $archive) . '</li>';

	$prev_month = date($dateformat, strtotime('-1 month', strtotime($start)));

	
	$c = 0;
	while ($end !== date($dateformat, strtotime('+1 month', strtotime($prev_month)))) {
		$archive = date('Ym', strtotime($prev_month));

		$output .= '<li>' . l($prev_month, 'archive/' . $archive) . '</li>';
		$prev_month = date($dateformat, strtotime('-1 month', strtotime($prev_month)));
		$c++;
	}
	$output .= '<ul>';


	return $output;
}